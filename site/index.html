<html>

<head>
	<!--
    This is the library that provides websocket streaming pub/sub
    The dev serverver is serving the html and javascript, but it also provides updating fx data on /fx/prices.
     -->
	<script src="stomp.js"></script>
	<script src="sparkline.js"></script>
</head>

<body>
	<section class="content">

		<!-- Custom card contains generated table -->
		<div class="card">
			<div class="card-header">
				<span>Live updating Table of sorted Currency values</span>
			</div>

			<!-- Table start -->
			<div class="card-content">
				<table id="currency-table">
					<thead id="currency-table-header">
						<tr class="currency-table-row">
							<th class="currency-table-cell">Currency</th>
							<th class="currency-table-cell align-right">Best Bid</th>
							<th class="currency-table-cell align-right">Best Ask</th>
							<th class="currency-table-cell align-right">Last Change Bid</th>
							<th class="currency-table-cell align-right">Last Change Ask</th>
							<th class="currency-table-cell align-right">Mid Price Trend</th>
						</tr>
					</thead>
					<tbody id="currency-table-body"></tbody>
				</table>
			</div>
			<!-- Table end -->

			<div class="card-footer">
				<span>Aal Zami Quamar Hayat</span>
				<span class="text-right">aalzamiquamar@gmail.com</span>
			</div>
		</div>

		<div class="notes">
			<h4>Notes:</h4>
			<p>To complete the challenge I have taken the following steps:</p>
			<p>--> I have made use of two arrays, one to store the data and the other to keep track of indexes of the currencies stored.</p>
			<p>--> A new key <code>midPrice</code> is added in the response object which stores the calculated mid price of the currency.</p>
			<p>--> The mid price is stored in an array with a timestamp of when the object was received.</p>
			<p>--> The mid price array should look like <code>midPrice: [[timestamp, vlaue], [timestamp, vlaue], [timestamp, vlaue]....]</code></p>
			<p>--> With the help of this timestamp, values that were received before 30 seconds are then filtered.</p>
			<p>--> Using the indexes of the stored currencies the old value is replaced with the new currency value along with the past mip price values.</p>
			<p>--> The resultant currency array is then sorted and rendered into a table with sparkline.</p>
		</div>

	</section>

	<!-- Code you write in index.js and anything it depends on will be bundled into bundle.js and
     is included here -->
	<script src="bundle.js"></script>

</body>

</html>